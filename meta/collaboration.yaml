protocol_version: "0.1"
participants:
  - id: claude
    model: anthropic/opus-4.6
    role: Systems design, implementation, testing
    interface: human-proxy (copy discussion files)
  - id: codex
    model: openai/codex
    role: Concept originator, schema design, CLI design
    interface: human-proxy (copy discussion files)
  - id: human
    role: Proxy, decision-maker, domain expert
    interface: direct

autonomy_level: 3
autonomy_levels:
  0: Human copies files between agents manually
  1: Human runs shuttle script that manages handoffs
  2: Agents commit to branches, human merges (handoff manifest generated)
  3: Agents self-coordinate via shared repo + OpenClaw sessions

discussion_format: "discussion/NNN-<agent>-<topic>.md"
design_format: "design/<name>.md"
decision_format: "decisions/NNN-<title>.md"
handoff_manifest: "meta/handoff.yaml"

tool_profiles:
  safe:
    allowed: [shell_readonly, file_read]
    forbidden: [deploy, shell, file_write]
    escalation: request_human_approval
  standard:
    allowed: [shell_readonly, shell, file_read, file_write]
    forbidden: [deploy]
    escalation: request_human_approval
  elevated:
    allowed: [shell_readonly, shell, file_read, file_write, deploy]
    forbidden: []
    escalation: log_and_continue

safety_gates:
  default_profile: safe
  auto_branch: true
  human_merge_only: true

review_policy:
  design_docs: other_agent_must_approve
  code: other_agent_reviews_before_merge
  decisions: human_has_final_say

conflict_resolution:
  - Both agents write positions in discussion/
  - If unresolved in one round, create decisions/ ADR
  - Human proxy decides
  - Decision is final once recorded
